
<p style="color: green"><%= notice %></p>

<h1><%= @movie.title %></h1>

<p>
  <strong>Sinopse:</strong>
  <%= @movie.synopsis %>
</p>

<p>
  <strong>Ano de Lançamento:</strong>
  <%= @movie.release_year %>
</p>

<p>
  <strong>Duração:</strong>
  <%= @movie.duration %> minutos
</p>

<p>
  <strong>Diretor:</strong>
  <%= @movie.director %>
</p>

<% if @movie.user == current_user %>
  <div>
    <%= link_to "Editar este filme", edit_movie_path(@movie) %> |
    <%= button_to "Apagar este filme", @movie, method: :delete, data: { turbo_confirm: "Tem certeza?" } %>
  </div>
<% end %>

<div>
  <%= link_to "Voltar para filmes", movies_path %>
</div>

<hr>


<h2>Comentários</h2>

<% if @comments.any? %>
  <div id="comments">
    <% @comments.each do |comment| %>
      <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 5px;">
        <p>
          <strong><%= comment.user ? comment.user.email : comment.name %></strong>
          <small><%= time_ago_in_words(comment.created_at) %> atrás</small>
        </p>
        <p><%= comment.content %></p>
        <% if comment.user == current_user %>
          <%= button_to "Apagar", movie_comment_path(@movie, comment), method: :delete, data: { turbo_confirm: "Tem certeza que deseja apagar este comentário?" }, style: "color: red; background: none; border: none; cursor: pointer; padding: 0;" %>
        <% end %>
      </div>
    <% end %>
  </div>
<% else %>
  <p>Nenhum comentário ainda. Seja o primeiro a comentar!</p>
<% end %>

<%# Renderiza o formulário de comentários %>
<%= render 'comments/form', movie: @movie, comment: @comment %>